(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2f780978"],{"04bd":function(e,t,a){var i=a("e7b1"),o=a("d10e"),r=a("28c8"),n=a("4ca1"),s=a("4f50"),l=a("7fc1"),c=/MSIE .\./.test(s),u=o.Function,d=function(e){return function(t,a){var i=arguments.length>2,o=i?l(arguments,2):void 0;return e(i?function(){r(n(t)?t:u(t),this,o)}:t,a)}};i({global:!0,bind:!0,forced:c},{setTimeout:d(o.setTimeout),setInterval:d(o.setInterval)})},"0874":function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));a("5232"),a("87c5"),a("fd72"),a("1981"),a("a3ad"),a("665c"),a("d6b0");var i=a("84b9");function o(e,t){if(e){if("string"===typeof e)return Object(i["a"])(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?Object(i["a"])(e,t):void 0}}},"0a5e":function(e,t,a){"use strict";t["a"]={data:function(){return{pageSizeCopy:10,totalCopy:0,currentPageCopy:1,headerCopy:null,tableDataCopy:[{name:"aaaa"}],loadingCopy:!1}},methods:{pageChangeCopy:function(e,t,a){this.currentPageCopy=a,e.call(t,a)},pageSizeChangeCopy:function(e,t,a){this.pageSizeCopy=a,this.pageChangeCopy(e,t,1)}}}},1981:function(e,t,a){var i=a("e7b1"),o=a("0637"),r=a("4df9"),n=!r((function(e){Array.from(e)}));i({target:"Array",stat:!0,forced:n},{from:o})},"2e9a":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=this,a=t.$createElement,i=t._self._c||a;return i("div",{staticClass:"setting-box flex-1 overflow-hidden flex-vertical"},[i("el-form",{staticClass:"clear-float customized-form padding-top",attrs:{inline:!0}},[i("el-form-item",{staticClass:"middle-item"},[i("el-input",{attrs:{placeholder:"请输入账户名"},model:{value:t.account,callback:function(e){t.account=e},expression:"account"}})],1),i("el-form-item",{staticClass:"middle-item"},[i("el-select",{attrs:{placeholder:"角色"},model:{value:t.memberValue,callback:function(e){t.memberValue=e},expression:"memberValue"}},t._l(t.memberList,(function(e){return i("el-option",{key:e.role_id,attrs:{label:e.role_name,value:e.role_id}})})),1)],1),i("el-form-item",{staticClass:"middle-item"},[i("el-select",{attrs:{placeholder:"状态"},model:{value:t.statusValue,callback:function(e){t.statusValue=e},expression:"statusValue"}},t._l(t.status,(function(e){return i("el-option",{key:e.id,attrs:{label:e.value,value:e.id}})})),1)],1),i("el-form-item",[i("el-button",{staticClass:"short-button",attrs:{type:"primary"},on:{click:t.searchFn}},[t._v("查询")])],1),i("el-form-item",[i("el-button",{staticClass:"short-button",on:{click:t.resetForm}},[t._v("重置")])],1),i("el-form-item",{staticClass:"f-r"},[i("el-button",{staticClass:"iconfont icon-add",attrs:{plain:""},on:{click:t.addNew}},[t._v("新增账号")])],1)],1),i("customized-table",{ref:"customizedTable",staticClass:"flex-1 overflow-hidden flex-vertical customized-table no-border",attrs:{loading:t.loading,Data:t.tableData,Header:t.header,total:t.total,"has-stripe":!0,"page-size":t.pageSize,"current-page":t.currentPage},on:{"size-change":function(a){t.pageSizeChange(t.tableLoad,e,a)},"current-change":function(a){t.pageChange(t.tableLoad,e,a)},editAccount:t.editAccount,deleteAccount:t.deleteAccount,resetPwd:t.resetPwd,configure:t.configure,configureCustomer:t.configureCustomer},scopedSlots:t._u([{key:"status",fn:function(e){var a=e.row;return[i("el-switch",{attrs:{"inactive-text":"","active-value":0,"inactive-value":1},on:{change:function(e){return t.switchTheRoleStatus(e,a)}},model:{value:a.status,callback:function(e){t.$set(a,"status",e)},expression:"row.status"}})]}}])}),i("customized-dialog",{staticClass:"add-new",attrs:{title:t.dialogTitle,visible:t.dialogVisible,"show-footer":!0,width:600},on:{cancel:function(e){return t.resetDialog("addForm")},submit:function(e){return t.submitAdd("addForm")},close:function(e){return t.resetDialog("addForm")}}},[i("el-form",{directives:[{name:"loading",rawName:"v-loading",value:t.dialogLoading,expression:"dialogLoading"}],ref:"addForm",staticClass:"dialog-body",attrs:{"element-loading-background":"transparent",model:t.addForm,rules:t.addRules,"label-width":"100px","label-position":"right"}},[i("el-form-item",{attrs:{label:"账号名称",prop:"email"}},[i("el-input",{attrs:{disabled:t.isEdit,maxlength:"50"},model:{value:t.addForm.email,callback:function(e){t.$set(t.addForm,"email",e)},expression:"addForm.email"}})],1),i("el-form-item",{attrs:{label:"用户姓名",prop:"username"}},[i("el-input",{attrs:{maxlength:"50"},model:{value:t.addForm.username,callback:function(e){t.$set(t.addForm,"username",e)},expression:"addForm.username"}})],1),i("el-form-item",{attrs:{label:"用户角色",prop:"type"}},[i("el-select",{model:{value:t.addForm.type,callback:function(e){t.$set(t.addForm,"type",e)},expression:"addForm.type"}},t._l(t.memberList,(function(e){return i("el-option",{key:e.role_id,attrs:{label:e.role_name,value:e.role_id}})})),1)],1)],1)],1),i("div",{staticClass:"resetSuccess"},[i("customized-dialog",{attrs:{title:t.resetDialogTitleCopy,visible:t.resetDialogVisibleCopy,width:600},on:{cancel:function(e){return t.resetPwdDialogCopy()},close:function(e){return t.resetPwdDialogCopy()}}},[i("el-form",{staticClass:"dialog-body",attrs:{model:t.resetPwdForm,"label-width":"80px","label-position":"left"}},[i("el-form-item",{attrs:{label:"账号名称",prop:"username"}},[i("el-input",{attrs:{readonly:"readonly"},model:{value:t.resetPwdForm.username,callback:function(e){t.$set(t.resetPwdForm,"username",e)},expression:"resetPwdForm.username"}})],1),i("el-form-item",{attrs:{label:"账号密码",prop:"password"}},[i("el-input",{attrs:{readonly:"readonly"},model:{value:t.resetPwdForm.password,callback:function(e){t.$set(t.resetPwdForm,"password",e)},expression:"resetPwdForm.password"}})],1),i("el-form-item",{attrs:{label:"用户角色",prop:"role_name"}},[i("el-input",{attrs:{disabled:""},model:{value:t.resetPwdForm.role_name,callback:function(e){t.$set(t.resetPwdForm,"role_name",e)},expression:"resetPwdForm.role_name"}})],1)],1)],1)],1),i("div",{staticClass:"advertiser-dialog"},[i("customized-dialog",{attrs:{title:t.configureTitle,visible:t.advertiserDialogVisible,width:800,height:522},on:{cancel:t.resetAdvertiserDialog,close:t.resetAdvertiserDialog}},[i("div",{staticClass:"advertiser-dialog-header font-16"},[i("span",[t._v("账号："+t._s(t.currentRow.username))]),i("span",{staticClass:"main-gutter"}),i("span",[t._v("角色："+t._s(t.currentRow.role_name))]),i("el-input",{staticClass:"search-account",attrs:{placeholder:"请输入搜索的账户名称","prefix-icon":"el-icon-search",clearable:""},on:{input:t.handleSearchChange},model:{value:t.advertiserKeyword,callback:function(e){t.advertiserKeyword=e},expression:"advertiserKeyword"}})],1),i("customized-table",{staticClass:"customized-table",attrs:{loading:t.loadingCopy,Data:t.tableDataCopy,Header:t.headerCopy,total:t.totalCopy,"max-height":null,"table-height":"522","page-size":t.pageSizeCopy,"current-page":t.currentPageCopy,"pagination-layout":"total, prev, pager, next, jumper"},on:{"current-change":function(a){t.pageChangeCopy(t.tableAdLoad,e,a)}},scopedSlots:t._u([{key:"switch",fn:function(e){var a=e.row;return[i("el-switch",{attrs:{"inactive-text":"关联","active-value":1,"inactive-value":0},on:{change:function(e){return t.switchTheStatus(e,a)}},model:{value:a.status,callback:function(e){t.$set(a,"status",e)},expression:"row.status"}})]}},{key:"channel",fn:function(e){var a=e.row;return[i("span",[t._v(t._s(t.channel[a.channel]))])]}}])})],1)],1),i("text-dialog",{ref:"deleteAccount",attrs:{textClass:t.textDialog.classes,text:t.textDialog.deleteText,"show-footer":!0,"is-reverse":!0},on:{success:t.subDeleteAccount}}),i("text-dialog",{ref:"resetPwd",attrs:{textClass:t.textDialog.classes,text:t.textDialog.resetPwd,"show-footer":!0,"is-reverse":!0},on:{success:t.subResetAccount}})],1)},o=[],r=(a("665c"),a("d6b0"),a("87c5"),a("00fe"),a("11e1"),a("a57c"),a("f83c"),a("9664"),a("4bbd")),n=a("6b9a"),s=a("0a5e"),l=a("ddfc"),c=a("d360"),u=function(e,t){return 2!==e.role_id},d=function(e){return 3!==e.role_id},f=[{prop:"username",label:"账户",showTooltip:!0},{prop:"role_name",label:"角色"},{prop:"status",label:"状态",showSlot:!0,slotName:"status"},{prop:"convert_cost",label:"操作",showSlot:!0,slotName:"button",childSlots:[{slotName:"editAccount",buttonName:"编辑"},{slotName:"deleteAccount",buttonName:"删除"},{slotName:"resetPwd",buttonName:"重置密码"},{slotName:"configure",buttonName:"配置广告主",disappear:d},{slotName:"configureCustomer",buttonName:"配置客户",disappear:u}]}],m=f,h=[{prop:"name",width:330,label:"广告主名称"},{prop:"channel",showSlot:!0,slotName:"channel",label:"渠道"},{prop:"operation",label:"操作",showSlot:!0,slotName:"switch"}],p=[{prop:"username",label:"客户名称",showTooltip:!0},{prop:"operation",width:"160",label:"操作",showSlot:!0,slotName:"switch"}],g=a("d4a6"),b=a("7b65"),v={mixins:[r["a"],n["a"],s["a"],l["a"],c["a"],g["a"]],components:{TextDialog:b["a"]},data:function(){var e=function(e,t,a){var i=/^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+(.[a-zA-Z0-9_-])+/;if(!t)return a(new Error("邮箱不能为空"));i.test(t)?a():a(new Error("请输入正确的邮箱格式"))};return{textDialog:{deleteText:"",resetPwd:"确定要重置该用户密码吗？",classes:""},configureTitle:"",account:"",memberValue:"",memberList:[{role_id:1,role_name:"管理员"},{role_id:2,role_name:"运营"},{role_id:3,role_name:"客户"}],statusValue:"",status:[{value:"已启用",id:0},{value:"已禁用",id:1}],isEdit:!1,dialogLoading:!1,resetDialogTitleCopy:"重置密码成功",resetDialogVisibleCopy:!1,advertiserDialogVisible:!1,advertiserKeyword:"",addForm:{username:"",email:"",type:"",role_id:""},channel:{1:"头条",2:"快手"},addRules:{email:[{required:!0,validator:e}],username:[{required:!0,message:"姓名不能为空"}],type:[{required:!0,message:"请选择角色"}]},currentRow:{username:"",role_name:"",type:"",role_id:"",user_id:""},resetPwdForm:{username:"",password:"",role_name:""}}},deactivated:function(){this.advertiserKeyword=""},methods:{openDialog:function(e){this.$refs[e]&&this.$refs[e].openDialog()},closeDialog:function(e){this.$refs[e]&&this.$refs[e].closeDialog()},searchFn:function(){this.tableLoad(1)},resetForm:function(){this.account="",this.memberValue="",this.statusValue=""},editAccount:function(e){var t=this;this.dialogTitle="编辑",this.isEdit=!0,this.addForm.user_id=e.user_id,this.dialogVisible=!0,this.dialogLoading=!0,this.axiosUserInfo(e.user_id).then((function(e){e&&200===e.data.code&&(t.addForm.email=e.data.data.email,t.addForm.type=e.data.data.role_id,t.addForm.role_id=e.data.data.role_id,t.addForm.username=e.data.data.username)}))["catch"]((function(e){console.log(e)}))["finally"]((function(){t.dialogLoading=!1}))},deleteAccount:function(e){this.currentRow=e,this.textDialog.deleteText="确定删除账号【"+"".concat(e.username)+"】吗？",this.textDialog.classes="iconfont icon-warning",this.openDialog("deleteAccount")},subDeleteAccount:function(){var e=this;this.axiosDelete(this.currentRow.user_id).then((function(t){200===t.data.code&&e.$message({message:"删除账号成功",type:"success"})}))["catch"]((function(e){console.warn(e)}))["finally"]((function(){Object.keys(e.currentRow).forEach((function(t){e.currentRow[t]=""})),e.closeDialog("deleteAccount"),e.tableLoad(1)}))},resetPwd:function(e){this.currentRow=e,this.textDialog.classes="iconfont icon-warning",this.openDialog("resetPwd")},subResetAccount:function(){var e=this;this.axiosReset(this.currentRow.user_id).then((function(t){200===t.data.code&&(e.resetPwdForm=t.data.data)}))["catch"]((function(e){console.warn(e)}))["finally"]((function(){})),this.resetDialogVisibleCopy=!0},configure:function(e){this.headerCopy=h,this.configureTitle="配置广告主",this.advertiserDialogVisible=!0,this.currentRow=e,this.tableAdLoad(1)},configureCustomer:function(e){this.headerCopy=p,this.configureTitle="配置客户",this.advertiserDialogVisible=!0,this.currentRow=e,this.tableAdLoad(1)},switchTheStatus:function(e,t){var a=this,i="配置客户"===this.configureTitle?t.customer_id:t.advertiser_id,o=t.status?1:0;this.axiosSwitchStatus(i,t.channel,o).then((function(e){200===e.data.code&&(1===t.status?a.$message.success("关联成功！"):a.$message.error("取消关联！"))}))["catch"]((function(e){console.log(e)}))["finally"]((function(){}))},switchTheRoleStatus:function(e,t){var a=this,i=t.status;this.axiosSwitchRoleStatus(t.user_id,i).then((function(e){200===e.data.code&&(1===i?a.$message({message:"账号："+t.username+" 已禁用",type:"error"}):a.$message({message:"账号："+t.username+" 已启用",type:"success"}))}))["catch"]((function(e){console.log(e)}))},handleSearchChange:function(){this.throttle(this.tableAdLoad,this,500,this.currentPageCopy)},axiosTable:function(e){return this.$http.get("user/list",{params:{page:e,page_size:this.pageSize,role_id:this.memberValue,status:this.statusValue,username:this.account.trim()}})},axiosUserInfo:function(e){return this.$http.get("user/info",{params:{user_id:e}})},axiosAdd:function(){return this.$http.post("user/register",{email:this.addForm.email.trim(),username:this.addForm.username.trim(),type:this.addForm.role_id,role_id:this.addForm.role_id})},axiosEdit:function(){return this.$http.post("user/edit",{username:this.addForm.username,user_id:this.addForm.user_id,role_id:this.addForm.type})},axiosDelete:function(e){return this.$http.post("user/delete",{user_id:e})},axiosReset:function(e){return this.$http.post("user/reset-passwd-by-admin",{user_id:e})},axiosAdTable:function(e){var t="配置客户"===this.configureTitle?"user/customer/list":"user/advertiser/list";return this.$http.get(t,{params:{page_size:this.pageSizeCopy,user_id:this.currentRow.user_id,bind:1,page:e,search:this.advertiserKeyword}})},axiosSwitchStatus:function(e,t,a){var i="配置客户"===this.configureTitle?"user/customer/bind":"user/company/bind";return this.$http.post(i,{user_id:this.currentRow.user_id,company_id:e,customer_id:e,channel:t,action:a})},axiosSwitchRoleStatus:function(e,t){return this.$http.post("user/state",{user_id:e,status:t})},tableLoad:function(e){var t=this;this.loading=!0,this.axiosTable(e).then((function(a){a&&200===a.data.code&&(t.total=Number(a.data.data.pagination.total),t.tableData=a.data.data.list,t.currentPage=e)}))["catch"]((function(e){console.warn(e)}))["finally"]((function(){t.loading=!1}))},tableAdLoad:function(e){var t=this;this.loadingCopy=!0,this.axiosAdTable(e).then((function(a){a&&200===a.data.code&&(t.totalCopy=Number(a.data.data.pagination.total),t.tableDataCopy=a.data.data.list,t.currentPageCopy=e)}))["catch"]((function(e){console.warn(e)}))["finally"]((function(){t.loadingCopy=!1}))},addNew:function(){this.dialogVisible=!0,this.dialogTitle="新增账号"},submitFormAdd:function(){var e=this;this.axiosAdd().then((function(t){200===t.data.code&&e.$message({message:"已成功添加账号,密码已发送邮箱",type:"success"})}))["catch"]((function(e){console.warn(e)}))["finally"]((function(){e.resetDialog("addForm"),e.tableLoad(1)}))},submitFormEdit:function(){var e=this;this.axiosEdit().then((function(t){200===t.data.code&&e.$message({message:"编辑账号成功",type:"success"})}))["catch"]((function(e){console.warn(e)}))["finally"]((function(){e.resetDialog("addForm"),e.isEdit=!1,e.tableLoad(1)}))},submitAdd:function(e){var t=this;this.addForm.role_id=this.addForm.type,this.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),!1;t.dialogVisible=!1,"新增账号"==t.dialogTitle?t.submitFormAdd():t.submitFormEdit()}))},resetDialog:function(e){var t=this;this.$refs[e]&&this.$refs[e].resetFields(),this.dialogVisible=!1,this.isEdit=!1,Object.keys(this.addForm).forEach((function(e){t.addForm[e]=""}))},resetPwdDialogCopy:function(){this.resetDialogVisibleCopy=!1,this.closeDialog("resetPwd")},resetAdvertiserDialog:function(){this.advertiserKeyword="",this.advertiserDialogVisible=!1}},created:function(){this.header=m},activated:function(){this.tableLoad(1)}},y=v,w=(a("cd2e"),a("cba8")),_=Object(w["a"])(y,i,o,!1,null,"20a67014",null);t["default"]=_.exports},"4bbd":function(e,t,a){"use strict";a("cd5c");t["a"]={data:function(){return{pageSize:10,total:0,currentPage:1,header:null,tableData:[],loading:!1}},mounted:function(){},methods:{pageChange:function(e,t,a){this.currentPage=a;for(var i=arguments.length,o=new Array(i>3?i-3:0),r=3;r<i;r++)o[r-3]=arguments[r];e.call.apply(e,[t,a].concat(o))},pageSizeChange:function(e,t,a){this.pageSize=a;for(var i=arguments.length,o=new Array(i>3?i-3:0),r=3;r<i;r++)o[r-3]=arguments[r];this.pageChange.apply(this,[e,t,1].concat(o))}}}},"634d":function(e,t,a){var i=a("3cec").PROPER,o=a("2f67"),r=a("ba54"),n="​᠎";e.exports=function(e){return o((function(){return!!r[e]()||n[e]()!==n||i&&r[e].name!==e}))}},"6b83":function(e,t,a){var i=a("e7b1"),o=a("aad3").entries;i({target:"Object",stat:!0},{entries:function(e){return o(e)}})},"6b9a":function(e,t,a){"use strict";t["a"]={data:function(){return{dialogVisible:!1,dialogTitle:""}},methods:{openDialog:function(){this.dialogVisible=!0},closeDialog:function(){this.dialogVisible=!1,this.$emit("dialogClose")}}}},"84b9":function(e,t,a){"use strict";function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,i=new Array(t);a<t;a++)i[a]=e[a];return i}a.d(t,"a",(function(){return i}))},a21c:function(e,t,a){},aad3:function(e,t,a){var i=a("b168"),o=a("9e4a"),r=a("e35a"),n=a("9235"),s=a("df2f").f,l=o(s),c=o([].push),u=function(e){return function(t){var a,o=n(t),s=r(o),u=s.length,d=0,f=[];while(u>d)a=s[d++],i&&!l(o,a)||c(f,e?[a,o[a]]:o[a]);return f}};e.exports={entries:u(!0),values:u(!1)}},cd2e:function(e,t,a){"use strict";a("a21c")},d360:function(e,t,a){"use strict";t["a"]={data:function(){return{memberList:[{role_id:1,role_name:"管理员"},{role_id:2,role_name:"运营"},{role_id:3,role_name:"客户"}],creatorList:[]}},mounted:function(){this.handleCreatorList()},methods:{handleCreatorList:function(){var e=this;this.$http.get("user/creator-list").then((function(t){200===t.data.code&&(e.creatorList=t.data.data.list)}))}}}},d4a6:function(e,t,a){"use strict";a.d(t,"a",(function(){return m}));var i=a("6fc5");a("eb8e");function o(e){if(Array.isArray(e))return e}a("3836"),a("25bd"),a("87c5"),a("7834"),a("a3ad"),a("8f5f");function r(e,t){var a=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var i,o,r=[],n=!0,s=!1;try{for(a=a.call(e);!(n=(i=a.next()).done);n=!0)if(r.push(i.value),t&&r.length===t)break}catch(l){s=!0,o=l}finally{try{n||null==a["return"]||a["return"]()}finally{if(s)throw o}}return r}}var n=a("0874");function s(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function l(e,t){return o(e)||r(e,t)||Object(n["a"])(e,t)||s()}a("6b83"),a("00fe"),a("11e1"),a("af47"),a("a57c");function c(e,t,a){for(var o=function(){var e=l(n[r],2),o=e[0],s=e[1],c=void 0;"string"===typeof a&&(c=[a]),c.forEach((function(e){Object(i["a"])(s)===e&&(t[o]=s)}))},r=0,n=Object.entries(e);r<n.length;r++)o()}function u(e,t){return Object.keys(t).reduce((function(a,i){var o=e.reduce((function(e,a){return c(a,e,t[i]),e}),{});return a[i]="data"===i?function(){return o}:o,a}),{})}var d=a("0a06"),f={data:"number",methods:"function"},m=u([d],f)},ddfc:function(e,t,a){"use strict";a("04bd"),a("8c17");t["a"]={data:function(){return{timerId:0}},methods:{throttle:function(e,t,a){for(var i=arguments.length,o=new Array(i>3?i-3:0),r=3;r<i;r++)o[r-3]=arguments[r];clearTimeout(t.timerId),a=a||200,t.timerId=setTimeout((function(){e.apply(t,o)}),a)},clearTimer:function(){clearTimeout(this.timerId)}},destroyed:function(){this.clearTimer()}}},eb8e:function(e,t,a){var i=a("e7b1"),o=a("2671");i({target:"Array",stat:!0},{isArray:o})},f83c:function(e,t,a){"use strict";var i=a("e7b1"),o=a("87e1").trim,r=a("634d");i({target:"String",proto:!0,forced:r("trim")},{trim:function(){return o(this)}})},fd72:function(e,t,a){var i=a("b168"),o=a("3cec").EXISTS,r=a("9e4a"),n=a("6991").f,s=Function.prototype,l=r(s.toString),c=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,u=r(c.exec),d="name";i&&!o&&n(s,d,{configurable:!0,get:function(){try{return u(c,l(this))[1]}catch(e){return""}}})}}]);