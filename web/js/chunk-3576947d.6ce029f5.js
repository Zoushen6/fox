(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3576947d"],{"00c4":function(t,e,a){var n=a("4f50");t.exports=/MSIE|Trident/.test(n)},"0760":function(t,e,a){"use strict";a("d446")},"07ab":function(t,e,a){var n=a("4f50"),i=n.match(/AppleWebKit\/(\d+)\./);t.exports=!!i&&+i[1]},2094:function(t,e,a){
/*!
 * clipboard.js v2.0.8
 * https://clipboardjs.com/
 *
 * Licensed MIT © Zeno Rocha
 */
!function(e,a){t.exports=a()}(0,(function(){return e={134:function(t,e,a){"use strict";a.d(e,{default:function(){return m}});e=a(279);var n=a.n(e),i=(e=a(370),a.n(e)),o=(e=a(817),a.n(e));function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var l=function(){function t(e){!function(e){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this),this.resolveOptions(e),this.initSelection()}var e,a,n;return e=t,(a=[{key:"resolveOptions",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};this.action=t.action,this.container=t.container,this.emitter=t.emitter,this.target=t.target,this.text=t.text,this.trigger=t.trigger,this.selectedText=""}},{key:"initSelection",value:function(){this.text?this.selectFake():this.target&&this.selectTarget()}},{key:"createFakeElement",value:function(){var t="rtl"===document.documentElement.getAttribute("dir");return this.fakeElem=document.createElement("textarea"),this.fakeElem.style.fontSize="12pt",this.fakeElem.style.border="0",this.fakeElem.style.padding="0",this.fakeElem.style.margin="0",this.fakeElem.style.position="absolute",this.fakeElem.style[t?"right":"left"]="-9999px",t=window.pageYOffset||document.documentElement.scrollTop,this.fakeElem.style.top="".concat(t,"px"),this.fakeElem.setAttribute("readonly",""),this.fakeElem.value=this.text,this.fakeElem}},{key:"selectFake",value:function(){var t=this,e=this.createFakeElement();this.fakeHandlerCallback=function(){return t.removeFake()},this.fakeHandler=this.container.addEventListener("click",this.fakeHandlerCallback)||!0,this.container.appendChild(e),this.selectedText=o()(e),this.copyText(),this.removeFake()}},{key:"removeFake",value:function(){this.fakeHandler&&(this.container.removeEventListener("click",this.fakeHandlerCallback),this.fakeHandler=null,this.fakeHandlerCallback=null),this.fakeElem&&(this.container.removeChild(this.fakeElem),this.fakeElem=null)}},{key:"selectTarget",value:function(){this.selectedText=o()(this.target),this.copyText()}},{key:"copyText",value:function(){var t;try{t=document.execCommand(this.action)}catch(e){t=!1}this.handleResult(t)}},{key:"handleResult",value:function(t){this.emitter.emit(t?"success":"error",{action:this.action,text:this.selectedText,trigger:this.trigger,clearSelection:this.clearSelection.bind(this)})}},{key:"clearSelection",value:function(){this.trigger&&this.trigger.focus(),document.activeElement.blur(),window.getSelection().removeAllRanges()}},{key:"destroy",value:function(){this.removeFake()}},{key:"action",set:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"copy";if(this._action=t,"copy"!==this._action&&"cut"!==this._action)throw new Error('Invalid "action" value, use either "copy" or "cut"')},get:function(){return this._action}},{key:"target",set:function(t){if(void 0!==t){if(!t||"object"!==r(t)||1!==t.nodeType)throw new Error('Invalid "target" value, use a valid Element');if("copy"===this.action&&t.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if("cut"===this.action&&(t.hasAttribute("readonly")||t.hasAttribute("disabled")))throw new Error('Invalid "target" attribute. You can\'t cut text from elements with "readonly" or "disabled" attributes');this._target=t}},get:function(){return this._target}}])&&s(e.prototype,a),n&&s(e,n),t}();function c(t){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function d(t,e){return(d=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function f(e){var a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var t,n=h(e);return t=a?(t=h(this).constructor,Reflect.construct(n,arguments,t)):n.apply(this,arguments),n=this,!(t=t)||"object"!==c(t)&&"function"!=typeof t?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(n):t}}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function p(t,e){if(t="data-clipboard-".concat(t),e.hasAttribute(t))return e.getAttribute(t)}var m=function(){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&d(t,e)}(r,n());var t,e,a,o=f(r);function r(t,e){var a;return function(t){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this),(a=o.call(this)).resolveOptions(e),a.listenClick(t),a}return t=r,a=[{key:"isSupported",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:["copy","cut"],e=(t="string"==typeof t?[t]:t,!!document.queryCommandSupported);return t.forEach((function(t){e=e&&!!document.queryCommandSupported(t)})),e}}],(e=[{key:"resolveOptions",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};this.action="function"==typeof t.action?t.action:this.defaultAction,this.target="function"==typeof t.target?t.target:this.defaultTarget,this.text="function"==typeof t.text?t.text:this.defaultText,this.container="object"===c(t.container)?t.container:document.body}},{key:"listenClick",value:function(t){var e=this;this.listener=i()(t,"click",(function(t){return e.onClick(t)}))}},{key:"onClick",value:function(t){t=t.delegateTarget||t.currentTarget,this.clipboardAction&&(this.clipboardAction=null),this.clipboardAction=new l({action:this.action(t),target:this.target(t),text:this.text(t),container:this.container,trigger:t,emitter:this})}},{key:"defaultAction",value:function(t){return p("action",t)}},{key:"defaultTarget",value:function(t){if(t=p("target",t),t)return document.querySelector(t)}},{key:"defaultText",value:function(t){return p("text",t)}},{key:"destroy",value:function(){this.listener.destroy(),this.clipboardAction&&(this.clipboardAction.destroy(),this.clipboardAction=null)}}])&&u(t.prototype,e),a&&u(t,a),r}()},828:function(t){var e;"undefined"==typeof Element||Element.prototype.matches||((e=Element.prototype).matches=e.matchesSelector||e.mozMatchesSelector||e.msMatchesSelector||e.oMatchesSelector||e.webkitMatchesSelector),t.exports=function(t,e){for(;t&&9!==t.nodeType;){if("function"==typeof t.matches&&t.matches(e))return t;t=t.parentNode}}},438:function(t,e,a){var n=a(828);function i(t,e,a,i,o){var r=function(t,e,a,i){return function(a){a.delegateTarget=n(a.target,e),a.delegateTarget&&i.call(t,a)}}.apply(this,arguments);return t.addEventListener(a,r,o),{destroy:function(){t.removeEventListener(a,r,o)}}}t.exports=function(t,e,a,n,o){return"function"==typeof t.addEventListener?i.apply(null,arguments):"function"==typeof a?i.bind(null,document).apply(null,arguments):("string"==typeof t&&(t=document.querySelectorAll(t)),Array.prototype.map.call(t,(function(t){return i(t,e,a,n,o)})))}},879:function(t,e){e.node=function(t){return void 0!==t&&t instanceof HTMLElement&&1===t.nodeType},e.nodeList=function(t){var a=Object.prototype.toString.call(t);return void 0!==t&&("[object NodeList]"===a||"[object HTMLCollection]"===a)&&"length"in t&&(0===t.length||e.node(t[0]))},e.string=function(t){return"string"==typeof t||t instanceof String},e.fn=function(t){return"[object Function]"===Object.prototype.toString.call(t)}},370:function(t,e,a){var n=a(879),i=a(438);t.exports=function(t,e,a){if(!t&&!e&&!a)throw new Error("Missing required arguments");if(!n.string(e))throw new TypeError("Second argument must be a String");if(!n.fn(a))throw new TypeError("Third argument must be a Function");if(n.node(t))return c=e,u=a,(l=t).addEventListener(c,u),{destroy:function(){l.removeEventListener(c,u)}};if(n.nodeList(t))return o=t,r=e,s=a,Array.prototype.forEach.call(o,(function(t){t.addEventListener(r,s)})),{destroy:function(){Array.prototype.forEach.call(o,(function(t){t.removeEventListener(r,s)}))}};if(n.string(t))return t=t,e=e,a=a,i(document.body,t,e,a);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList");var o,r,s,l,c,u}},817:function(t){t.exports=function(t){var e,a="SELECT"===t.nodeName?(t.focus(),t.value):"INPUT"===t.nodeName||"TEXTAREA"===t.nodeName?((e=t.hasAttribute("readonly"))||t.setAttribute("readonly",""),t.select(),t.setSelectionRange(0,t.value.length),e||t.removeAttribute("readonly"),t.value):(t.hasAttribute("contenteditable")&&t.focus(),a=window.getSelection(),(e=document.createRange()).selectNodeContents(t),a.removeAllRanges(),a.addRange(e),a.toString());return a}},279:function(t){function e(){}e.prototype={on:function(t,e,a){var n=this.e||(this.e={});return(n[t]||(n[t]=[])).push({fn:e,ctx:a}),this},once:function(t,e,a){var n=this;function i(){n.off(t,i),e.apply(a,arguments)}return i._=e,this.on(t,i,a)},emit:function(t){for(var e=[].slice.call(arguments,1),a=((this.e||(this.e={}))[t]||[]).slice(),n=0,i=a.length;n<i;n++)a[n].fn.apply(a[n].ctx,e);return this},off:function(t,e){var a=this.e||(this.e={}),n=a[t],i=[];if(n&&e)for(var o=0,r=n.length;o<r;o++)n[o].fn!==e&&n[o].fn._!==e&&i.push(n[o]);return i.length?a[t]=i:delete a[t],this}},t.exports=e,t.exports.TinyEmitter=e}},a={},t.n=function(e){var a=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(a,{a:a}),a},t.d=function(e,a){for(var n in a)t.o(a,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:a[n]})},t.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},t(134).default;function t(n){if(a[n])return a[n].exports;var i=a[n]={exports:{}};return e[n](i,i.exports,t),i.exports}var e,a}))},"269f":function(t,e,a){"use strict";a("a935")},"3d5e":function(t,e,a){var n=a("4f50"),i=n.match(/firefox\/(\d+)/i);t.exports=!!i&&+i[1]},"4bbd":function(t,e,a){"use strict";a("cd5c");e["a"]={data:function(){return{pageSize:10,total:0,currentPage:1,header:null,tableData:[],loading:!1}},mounted:function(){},methods:{pageChange:function(t,e,a){this.currentPage=a;for(var n=arguments.length,i=new Array(n>3?n-3:0),o=3;o<n;o++)i[o-3]=arguments[o];t.call.apply(t,[e,a].concat(i))},pageSizeChange:function(t,e,a){this.pageSize=a;for(var n=arguments.length,i=new Array(n>3?n-3:0),o=3;o<n;o++)i[o-3]=arguments[o];this.pageChange.apply(this,[t,e,1].concat(i))}}}},"63fc":function(t,e,a){},"6b9a":function(t,e,a){"use strict";e["a"]={data:function(){return{dialogVisible:!1,dialogTitle:""}},methods:{openDialog:function(){this.dialogVisible=!0},closeDialog:function(){this.dialogVisible=!1,this.$emit("dialogClose")}}}},7411:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"padding-top m-l-r-16 container flex background-white"},[a("el-tabs",{staticClass:"flex-vertical flex-1 overflow-hidden",model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"计算数据",name:"data"}},[a("operation-data",{ref:"operationDate"})],1),a("el-tab-pane",{attrs:{label:"计算规则",name:"rules"}},[a("operation-rule",{staticClass:"p-l-r-24"})],1)],1)],1)},i=[],o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"data-container"},[a("el-form",{ref:"optionsForm",staticClass:"customized-form background-white m-t-5 p-l-r-24",attrs:{inline:!0,model:t.optionsForm,rules:t.rules}},[a("el-form-item",{staticClass:"rule-name"},[a("el-select",{attrs:{placeholder:"选择规则名称"},model:{value:t.optionsForm.ruleName,callback:function(e){t.$set(t.optionsForm,"ruleName",e)},expression:"optionsForm.ruleName"}},t._l(t.optionsForm.ruleList,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1),a("el-form-item",[a("customized-time-picker",{staticClass:"time-picker long-item",attrs:{date:t.optionsForm.dateValue,shortcutsSetting:t.shortcutsSetting,"max-date":1,"min-date":365},on:{"update:date":function(e){return t.$set(t.optionsForm,"dateValue",e)}}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.searchFn}},[t._v("查询")])],1),a("el-form-item",{staticClass:"desc",attrs:{label:"规则开始时间："}},[a("span",[t._v(t._s(t.optionsForm.startDate?t.optionsForm.startDate:t.today))])]),a("el-form-item",{staticClass:"desc",attrs:{label:"规则类型："}},[a("span",[t._v(t._s(1===t.optionsForm.ruleType?"对比重合度":"昨日重合度"))])])],1),a("div",{staticClass:"background"},t._l(t.dataList,(function(e,n){return a("table-chart-data",{key:n,ref:"tableChartData",refInFor:!0,attrs:{isLoading:t.loading,info:e,rule:t.optionsForm.ruleType},on:{updateTable:t.tableLoad,exportData:t.exportData}})})),1)],1)},r=[],s=(a("8d54"),a("87c5"),a("7ef0"),a("5232"),a("cddc"),a("f904")),l=a("7eeb"),c=a("6e27"),u=function(){var t=this,e=this,a=e.$createElement,n=e._self._c||a;return n("div",[n("div",{staticClass:"table-title overflow-hidden"},[2===e.rule?n("span",[n("span",[e._v("淘宝任务ID：")]),n("span",{staticClass:"pointer",attrs:{title:e.info.task_id},on:{click:function(t){return e.CopyContent(e.info.task_id)}}},[e._v(e._s(e._f("handleLength")(e.info.task_id,20))+"    ")]),n("span",{staticClass:"pointer",attrs:{title:e.info.task_name},on:{click:function(t){return e.CopyContent(e.info.task_name)}}},[e._v("( "+e._s(e._f("handleLength")(e.info.task_name,20))+" )")])]):1===e.rule?e._l(e.info.task,(function(t,a){return n("span",{key:a},[n("span",[e._v("对比任务")]),n("span",{staticClass:"pointer",attrs:{title:t.task_id},on:{click:function(a){return e.CopyContent(t.task_id)}}},[e._v(e._s(a+1)+"："+e._s(e._f("handleLength")(t.task_id,20))+"    ")]),n("span",{staticClass:"pointer",attrs:{title:t.task_name},on:{click:function(a){return e.CopyContent(t.task_name)}}},[e._v("( "+e._s(e._f("handleLength")(t.task_name,20))+" )")]),e._v("     ")])})):e._e(),n("el-button",{staticClass:"f-r",attrs:{type:"primary"},on:{click:e.exportData}},[e._v("导出表格")])],2),n("el-row",{attrs:{gutter:4}},[n("el-col",{staticClass:"col-height",attrs:{span:12,xs:24}},[n("div",{staticClass:"data-padding background-white"},[n("customized-table",{ref:"customizedTable",staticClass:"white-table mini-table customized-table ",attrs:{loading:e.isLoading,"show-column-border":!0,"max-height":null,"table-height":240,Data:e.info.list,Header:1===e.rule?e.newHeader:e.header,"current-page":e.currentPage,"page-size":e.pageSize,"page-sizes":e.pageSizes,total:e.total},on:{"size-change":function(a){e.pageSizeChange(e.handleTable,t,a)},"current-change":function(a){e.pageChange(e.handleTable,t,a)}}})],1)]),n("el-col",{staticClass:"col-height background-white",attrs:{span:12,xs:24}},[n("div",{staticClass:"data-padding"},[n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.isLoading,expression:"isLoading"}],ref:"chart",class:e.chartData&&e.chartData.length?"":"empty-chart",staticStyle:{height:"287px"}})])])],1)],1)},d=[],f=(a("9664"),a("dfcf"),a("6aee")),h=a("5422"),p=a("430a"),m=a("e6ef"),g=a.n(m);function v(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"复制成功",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"复制失败...";this.$copyText(t).then((function(t){e&&h["Message"].success(e)}))["catch"]((function(t){a&&h["Message"].error(a)}))}g.a.config.autoSetContainer=!0,p["default"].use(g.a);var b=a("4bbd"),y=a("89a9"),k=(a("fd72"),{title:{top:"-1%",text:"重合度趋势图",textStyle:{fontSize:14,fontWeight:"bold",fontColor:"#333333"}},xAxis:{type:"category",data:[],axisLabel:{interval:"auto"},axisTick:{show:!1},axisLine:{show:!1}},yAxis:{type:"value",axisLabel:{formatter:"{value}%"}},grid:{left:"4%",right:"4%",top:"13%",bottom:"10%",containLabel:!0},tooltip:{trigger:"axis",textStyle:{fontWeight:"normal"},formatter:function(t){for(var e=t[0].name,a=0,n=t.length;a<n;a++)e+="<br/>"+t[a].marker+t[a].seriesName+" : "+t[a].value+"%";return e}},series:{name:"重合度",data:[],type:"line",smooth:.4,symbolSize:8,showSymbol:!1,itemStyle:{color:"#4063DF",borderColor:"#4063DF"}}}),_=function(t){return t.contact_ratio+"%"},x=[{prop:"dt",label:"创建日期",align:"center"},{prop:"yesterday_num",label:"昨日用户数",align:"center"},{prop:"today_num",label:"今日用户数",align:"center"},{prop:"unite_num",label:"重合用户数",align:"center"},{prop:"contact_ratio",label:"重合度",align:"center",formatter:_}],w=[{prop:"dt",label:"创建日期",align:"center"},{prop:"tag1_total",label:"任务1用户数",align:"center"},{prop:"tag2_total",label:"任务2用户数",align:"center"},{prop:"unite_num",label:"重合用户数",align:"center"},{prop:"contact_ratio",label:"重合度",align:"center",formatter:_}],C={name:"TableChartData",mixins:[b["a"],y["a"]],props:{info:{type:Object,default:function(){return{pagination:{page_size:10,current_page:1,total:0},list:[]}}},rule:{type:[String,Number],default:1},isLoading:{type:Boolean,default:!1}},data:function(){return{pageSizes:[10,20,30,40,50],chartData:[],header:x,newHeader:w,option:k}},mounted:function(){this.initChart()},watch:{info:{handler:function(t){var e=this;t.pagination&&(this.pageSize=t.pagination.page_size,this.currentPage=t.pagination.current_page,this.total=t.pagination.total),this.tableData=t.list,this.chartData=t.list,this.$nextTick((function(){e.setOptions()}))},immediate:!0}},methods:{CopyContent:v,handleTable:function(){this.$emit("updateTable",this.getCurInfo())},exportData:function(){this.$emit("exportData",this.getCurInfo())},getCurInfo:function(){return{task_id:this.info.task_id,page:this.currentPage,page_size:this.pageSize}},initChart:function(){this.chart=f["a"](this.$refs.chart),this.resizeChart()},setOptions:function(){this.chart.clear();var t=this.chartData.slice().reverse(),e=this.option;e.series.data=t.map((function(t){return t.contact_ratio})),e.xAxis.data=t.map((function(t){return t.dt})),this.chart.setOption(e,!0)}}},T=C,S=(a("cb05"),a("cba8")),D=Object(S["a"])(T,u,d,!1,null,"6ca7c4ca",null),F=D.exports,L={name:"OperationData",components:{CustomizedTimePicker:c["default"],TableChartData:F},data:function(){return{common:s["a"],loading:!1,dataList:[],optionsForm:{dateValue:Object(l["d"])(7,1),ruleName:"",ruleList:[],startDate:"",ruleType:"",firstData:null},rules:{ruleName:[{required:!0,message:"请选择规则名称"}]},shortcutsSetting:["yesterday","lastSeven","lastThirty","lastWeek","lastMonth"],today:s["a"].getNewDay(new Date)}},mounted:function(){this.ruleDataList()},methods:{firstData:function(){var t=this;this.optionsForm.ruleList.slice().reverse().find((function(e){void 0!==e.status&&"1"===e.status&&(t.optionsForm.ruleName=e.id)}))},ruleDataList:function(){var t=this;this.$http.get("/rta/rule/list",{params:{page_size:1e3,status:1}}).then((function(e){200===e.data.code&&(t.optionsForm.ruleList=e.data.data.list,t.firstData(),t.searchFn())}))},searchFn:function(){var t=this;this.$refs.optionsForm.validate((function(e){e&&t.tableLoad()}))},axiosData:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1?arguments[1]:void 0,a={rule_id:this.optionsForm.ruleName,start_date:this.common.getNewDay(this.optionsForm.dateValue[0]),end_date:this.common.getNewDay(this.optionsForm.dateValue[1]),is_export:t};return Object.assign(a,e),this.$http.get("/rta/rule/data",{params:a,responseType:t?"blob":""})},tableLoad:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.loading=!0,this.axiosData(0,e).then((function(a){var n;200===a.data.code&&(t.optionsForm.startDate=a.data.data.create_time,t.optionsForm.ruleType=a.data.data.rule_type,"{}"===JSON.stringify(e)?t.dataList=a.data.data.list:(a.data.data.list.find((function(t,a){t.task_id===e.task_id&&(n=a)})),t.dataList[n]=a.data.data.list[n]))}))["catch"]((function(t){console.warn(t)}))["finally"]((function(){t.loading=!1}))},exportData:function(t){var e=this;this.axiosData(1,t).then((function(t){e.common.downloadFileBlob(t)}))}}},R=L,E=(a("0760"),Object(S["a"])(R,o,r,!1,null,"1dc49eaa",null)),A=E.exports,N=function(){var t=this,e=this,a=e.$createElement,n=e._self._c||a;return n("div",{staticClass:"flex-vertical overflow-hidden container flex-1"},[n("el-form",{ref:"rulesForm",staticClass:"customized-form padding-top",attrs:{inline:!0,model:e.rulesForm}},[n("el-form-item",{staticClass:"long-item",attrs:{prop:"ruleType"}},[n("el-select",{attrs:{placeholder:"选择规则类型",clearable:""},model:{value:e.rulesForm.ruleType,callback:function(t){e.$set(e.rulesForm,"ruleType",t)},expression:"rulesForm.ruleType"}},e._l(e.rulesForm.ruleTypeList,(function(t){return n("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),n("el-form-item",{staticClass:"long-item",attrs:{prop:"ruleState"}},[n("el-select",{attrs:{placeholder:"选择规则状态",clearable:""},model:{value:e.rulesForm.ruleState,callback:function(t){e.$set(e.rulesForm,"ruleState",t)},expression:"rulesForm.ruleState"}},e._l(e.rulesForm.ruleStateList,(function(t){return n("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:e.searchFn}},[e._v("查询")])],1),n("br"),n("el-form-item",[n("el-button",{staticClass:"iconfont icon-add",attrs:{plain:""},on:{click:e.buildOperation}},[e._v("新建规则")])],1)],1),n("customized-table",{ref:"customizedTable",staticClass:"flex-1 overflow-hidden flex-vertical customized-table",attrs:{loading:e.loading,Data:e.tableData,Header:e.header,total:e.total,"page-size":e.pageSize,"current-page":e.currentPage},on:{"size-change":function(a){e.pageSizeChange(e.tableLoad,t,a)},"current-change":function(a){e.pageChange(e.tableLoad,t,a)},"sort-change":e.sortChangeHandle,start:function(t){e.start(t)},delete:function(t){e.deleteRules(t)},stop:function(t){e.stop(t)}},scopedSlots:e._u([{key:"ruleStatus",fn:function(t){var a=t.row;return[n("span",{directives:[{name:"show",rawName:"v-show",value:"0"===a.status,expression:"row.status === '0'"}],staticClass:"not-start",staticStyle:{position:"relative"}},[e._v("未开始")]),n("span",{directives:[{name:"show",rawName:"v-show",value:"1"===a.status,expression:"row.status === '1'"}],staticStyle:{position:"relative"}},[n("span",{staticClass:"start"}),e._v("进行中")]),n("span",{directives:[{name:"show",rawName:"v-show",value:"2"===a.status,expression:"row.status === '2'"}],staticStyle:{position:"relative"}},[n("span",{staticClass:"stop"}),e._v("已停止")])]}}])}),n("customized-dialog",{staticClass:"customized-dialog build-rule",attrs:{width:600,title:"新建计算规则",visible:e.buildOperationRules,"show-footer":!0},on:{cancel:e.resetDialog,submit:function(t){return e.submitBuild("buildRuleForm")},close:e.resetDialog}},[n("el-form",{ref:"buildRuleForm",staticClass:"customized-form",attrs:{inline:!0,model:e.buildRuleForm,rules:e.buildRules}},[n("el-form-item",{staticClass:"long-item",attrs:{label:"规则名称：",prop:"ruleName"}},[n("el-input",{attrs:{maxlength:"50"},model:{value:e.buildRuleForm.ruleName,callback:function(t){e.$set(e.buildRuleForm,"ruleName",t)},expression:"buildRuleForm.ruleName"}})],1),n("el-form-item",{staticClass:"long-item",attrs:{label:"规则类型：",prop:"contactRatio"}},[n("el-select",{attrs:{placeholder:"请选择"},on:{change:e.change},model:{value:e.buildRuleForm.contactRatio,callback:function(t){e.$set(e.buildRuleForm,"contactRatio",t)},expression:"buildRuleForm.contactRatio"}},e._l(e.buildRuleForm.contactRatioList,(function(t){return n("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),2===e.buildRuleForm.contactRatio?n("div",e._l(e.taskList,(function(t,a){return n("el-form-item",{key:a,staticClass:"long-item",attrs:{label:"任务"+(a+1),"label-width":"90px"}},[n("el-select",{class:e.validAccess?"task":"",attrs:{placeholder:"请选择任务"},on:{"visible-change":e.handleChange},model:{value:t.name,callback:function(a){e.$set(t,"name",a)},expression:"ite.name"}},e._l(t.list,(function(t){return n("el-option",{key:t.id,attrs:{label:t.task_name,value:t.id}})})),1),n("div",{directives:[{name:"show",rawName:"v-show",value:e.validAccess,expression:"validAccess"}],staticClass:"valid"},[n("span",[e._v("请选择任务！")])])],1)})),1):1===e.buildRuleForm.contactRatio?n("div",e._l(e.comparisonTaskList,(function(t,a){return n("el-form-item",{key:a,staticClass:"long-item",attrs:{label:"对比任务"+(a+1),"label-width":"90px"}},[n("el-select",{class:e.validAccess?"task":"",attrs:{placeholder:"请选择任务"},on:{"visible-change":e.handleChange},model:{value:t.name,callback:function(a){e.$set(t,"name",a)},expression:"ite.name"}},e._l(t.list,(function(t){return n("el-option",{key:t.id,attrs:{label:t.task_name,value:t.id}})})),1),n("div",{directives:[{name:"show",rawName:"v-show",value:e.validAccess,expression:"validAccess"}],staticClass:"valid"},[n("span",[e._v("请选择任务！")])])],1)})),1):e._e(),n("el-form-item",{staticStyle:{width:"100%"},attrs:{label:"计算方式： 每日","label-width":"130px"}})],1)],1),n("text-dialog",{ref:"start_stop",attrs:{"show-footer":!0,"is-reverse":!0,title:e.info.title,text:e.info.text,textClass:e.info.class},on:{success:e.operationRules}})],1)},z=[],O=(a("e580"),a("00fe"),a("11e1"),a("996d"),function(t){return s["a"].getNewDay(1e3*Number(t.create_time))}),$=function(t){return"1"===t.type?"对比重合度":"昨日重合度"},j=function(){return"每日"},I=function(t){return"1"===t.status},P=function(t){return"1"!==t.status},M=function(t){return"1"===t.status},H=[{prop:"id",label:"规则ID"},{prop:"name",label:"规则名称",showTooltip:!0},{prop:"type",label:"规则类型",formatter:$},{prop:"status",label:"规则状态",showSlot:!0,slotName:"ruleStatus"},{prop:"mode",label:"计算方式",formatter:j},{prop:"create_time",label:"创建日期",sortable:"descending",formatter:O},{prop:"convert_cost",label:"操作",showSlot:!0,slotName:"button",childSlots:[{slotName:"start",buttonName:"开始",disappear:I},{slotName:"stop",buttonName:"停止",disappear:P},{slotName:"delete",buttonName:"删除",disappear:M}]}],B=a("2460"),q=a("7b65"),V=a("6b9a"),J={name:"OperationRule",components:{CustomizedDialog:B["default"],TextDialog:q["a"]},mixins:[b["a"],V["a"]],data:function(){return{rulesForm:{ruleType:"",ruleTypeList:[],ruleState:"",ruleStateList:[]},buildRuleForm:{ruleName:"",contactRatio:"",contactRatioList:[]},buildRules:{ruleName:[{required:!0,message:"请输入规则名称"}],contactRatio:[{required:!0,message:"请选择规则类型"}]},validAccess:!1,loading:!1,tableData:[],buildOperationRules:!1,sort:null,order:null,info:{title:"提示",text:"",class:"iconfont icon-warning",name:"",url:"",id:""},taskList:[{name:"",list:null},{name:"",list:null},{name:"",list:null}],comparisonTaskList:[{name:"",list:null},{name:"",list:null}],taskID:[]}},created:function(){this.header=H},mounted:function(){this.ruleStatus(),this.ruleType(),this.tableLoad()},deactivated:function(){this.$refs.rulesForm.resetFields()},methods:{ruleStatus:function(){var t=this;this.$http.get("/rta/rule/status-list").then((function(e){200===e.data.code&&(t.rulesForm.ruleStateList=e.data.data.list)}))},ruleType:function(){var t=this;this.$http.get("/rta/rule/type-list").then((function(e){200===e.data.code&&(t.rulesForm.ruleTypeList=e.data.data.list,t.buildRuleForm.contactRatioList=e.data.data.list)}))},sortChangeHandle:function(t){t.order?(this.order=t.prop,this.sort="descending"===t.order?"desc":"asc"):(this.order=null,this.sort=null),this.tableLoad()},axiosParams:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return this.$http.get("/rta/rule/list",{params:{type:this.rulesForm.ruleType,status:this.rulesForm.ruleState,order:this.order,sort:this.sort,page:t,page_size:this.pageSize}})},tableLoad:function(t){var e=this;this.loading=!0,this.axiosParams(t).then((function(a){200===a.data.code&&(e.tableData=a.data.data.list,e.total=Number(a.data.data.pagination.total),e.currentPage=t)}))["catch"]((function(t){console.warn(t)}))["finally"]((function(){e.loading=!1}))},openDialog:function(t){this.$refs[t]&&this.$refs[t].openDialog()},closeDialog:function(t){this.$refs[t]&&this.$refs[t].closeDialog()},searchFn:function(){this.tableLoad()},buildOperation:function(){this.buildOperationRules=!0},resetDialog:function(){this.$refs.buildRuleForm.resetFields(),this.buildOperationRules=!1,this.validAccess=!1},axiosBuild:function(){return this.$http.post("/rta/rule/create",{name:this.buildRuleForm.ruleName,type:this.buildRuleForm.contactRatio,status:0,task:JSON.stringify(this.taskID)})},change:function(){this.taskID=[],this.restTaskList()},handleChange:function(){var t=[],e=2===this.buildRuleForm.contactRatio?this.taskList:this.comparisonTaskList;e.forEach((function(e){e.name&&t.push(e.name)})),1===this.buildRuleForm.contactRatio?this.validAccess=2!==t.length:this.validAccess=0===t.length,this.taskID=t,this.$http.get("/task/search",{params:{id:t.join(",")}}).then((function(t){200===t.data.code&&e.forEach((function(e){e.list=t.data.data.list.slice().reverse()}))}))},restTaskList:function(){var t=2===this.buildRuleForm.contactRatio?this.taskList:this.comparisonTaskList;t.forEach((function(t){t.name&&(t.name="")}))},submitBuild:function(t){var e=this;this.$refs[t].validate((function(t){t&&(1===e.buildRuleForm.contactRatio?2==e.taskID.length:e.taskID.length>=1)?(e.validAccess=!1,e.axiosBuild().then((function(t){200===t.data.code?(e.$message.success("新建规则成功！"),e.tableLoad(),e.restTaskList(),e.$refs.buildRuleForm.resetFields(),e.buildOperationRules=!1,e.taskID=[]):(e.validAccess=!1,e.buildOperationRules=!0)}))["catch"]((function(t){console.warn(t)}))["finally"]((function(){}))):(1===e.buildRuleForm.contactRatio?2==e.taskID.length:e.taskID.length>=1)?e.validAccess=!1:e.validAccess=!0}))},deleteRules:function(t){this.openDialog("start_stop"),this.info.text="确认删除计算规则吗？",this.info.name="delete",this.info.url="/rta/rule/delete",this.info.id=t.id},start:function(t){this.openDialog("start_stop"),this.info.text="确认开始此计算规则吗？",this.info.name="start",this.info.url="/rta/rule/start",this.info.id=t.id},stop:function(t){this.openDialog("start_stop"),this.info.text="确认停止此计算规则吗？",this.info.name="stop",this.info.url="/rta/rule/stop",this.info.id=t.id},itemInfo:function(){var t=this;this.$http.post(this.info.url,{id:this.info.id}).then((function(e){200==e.data.code&&("delete"===t.info.name?t.$message.success("删除成功！"):t.$message.success("操作成功！"))}))["catch"]((function(t){console.warn(t)}))["finally"]((function(){t.tableLoad()}))},operationRules:function(){this.itemInfo(),this.closeDialog("start_stop")}}},W=J,Y=(a("269f"),Object(S["a"])(W,N,z,!1,null,"a4d0eb5c",null)),K=Y.exports,G={name:"CalculationRules",components:{OperationRule:K,OperationData:A},data:function(){return{activeName:"data",calculationList:[{label:"计算数据",name:"data"},{label:"计算规则",name:"rules"}]}},deactivated:function(){this.activeName="data"}},U=G,X=(a("ba35"),Object(S["a"])(U,n,i,!1,null,"594fc290",null));e["default"]=X.exports},"7eeb":function(t,e,a){"use strict";a.d(e,"d",(function(){return n})),a.d(e,"b",(function(){return i})),a.d(e,"e",(function(){return o})),a.d(e,"a",(function(){return r})),a.d(e,"c",(function(){return s}));a("3c7d"),a("dfcf"),a("f904");var n=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=new Date,n=new Date,i=e+t-1;return a.setTime(a.getTime()-864e5*i),n.setTime(n.getTime()-864e5*e),[a,n]},i=function(){var t=new Date,e=new Date,a=t.getDay()>0?t.getDay()-1:6;return e.setTime(e.getTime()-864e5*a),[e,t]},o=function(){var t=new Date,e=new Date,a=t.getDay();return e.setTime(e.getTime()-864e5*(a+6)),t.setTime(t.getTime()-864e5*a),[e,t]},r=function(){var t=new Date,e=new Date,a=t.getDate()-1;return e.setTime(e.getTime()-864e5*a),[e,t]},s=function(){var t=new Date,e=t.getDate(),a=t.getFullYear()-(t.getMonth()>0?0:1),n=(t.getMonth()+11)%12,i=new Date(a,n,1);return t.setTime(t.getTime()-864e5*e),[i,t]}},"89a9":function(t,e,a){"use strict";e["a"]={data:function(){return{date:[],chart:null,loading:!1,export:""}},mounted:function(){},beforeDestroy:function(){window.removeEventListener("resize",this.resizeChartMethod)},methods:{resizeChart:function(){window.addEventListener("resize",this.resizeChartMethod)},resizeChartMethod:function(){this.chart.resize()}}}},"8d54":function(t,e,a){"use strict";var n=a("e7b1"),i=a("5a69").find,o=a("3c77"),r="find",s=!0;r in[]&&Array(1)[r]((function(){s=!1})),n({target:"Array",proto:!0,forced:s},{find:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),o(r)},a935:function(t,e,a){},ba35:function(t,e,a){"use strict";a("ebc2")},cb05:function(t,e,a){"use strict";a("63fc")},d446:function(t,e,a){},e580:function(t,e,a){"use strict";var n=a("e7b1"),i=a("9e4a"),o=a("3cd5"),r=a("9d21"),s=a("dc00"),l=a("7995"),c=a("2f67"),u=a("d3e3"),d=a("ebcc"),f=a("3d5e"),h=a("00c4"),p=a("4e49"),m=a("07ab"),g=[],v=i(g.sort),b=i(g.push),y=c((function(){g.sort(void 0)})),k=c((function(){g.sort(null)})),_=d("sort"),x=!c((function(){if(p)return p<70;if(!(f&&f>3)){if(h)return!0;if(m)return m<603;var t,e,a,n,i="";for(t=65;t<76;t++){switch(e=String.fromCharCode(t),t){case 66:case 69:case 70:case 72:a=3;break;case 68:case 71:a=4;break;default:a=2}for(n=0;n<47;n++)g.push({k:e+n,v:a})}for(g.sort((function(t,e){return e.v-t.v})),n=0;n<g.length;n++)e=g[n].k.charAt(0),i.charAt(i.length-1)!==e&&(i+=e);return"DGBEFHACIJK"!==i}})),w=y||!k||!_||!x,C=function(t){return function(e,a){return void 0===a?-1:void 0===e?1:void 0!==t?+t(e,a)||0:l(e)>l(a)?1:-1}};n({target:"Array",proto:!0,forced:w},{sort:function(t){void 0!==t&&o(t);var e=r(this);if(x)return void 0===t?v(e):v(e,t);var a,n,i=[],l=s(e);for(n=0;n<l;n++)n in e&&b(i,e[n]);u(i,C(t)),a=i.length,n=0;while(n<a)e[n]=i[n++];while(n<l)delete e[n++];return e}})},e6ef:function(t,e,a){var n=a("2094"),i={autoSetContainer:!1,appendToBody:!0},o={install:function(t){var e="3."===t.version.slice(0,2)?t.config.globalProperties:t.prototype;e.$clipboardConfig=i,e.$copyText=function(t,e){return new Promise((function(a,o){var r=document.createElement("button"),s=new n(r,{text:function(){return t},action:function(){return"copy"},container:"object"===typeof e?e:document.body});s.on("success",(function(t){s.destroy(),a(t)})),s.on("error",(function(t){s.destroy(),o(t)})),i.appendToBody&&document.body.appendChild(r),r.click(),i.appendToBody&&document.body.removeChild(r)}))},t.directive("clipboard",{bind:function(t,e,a){if("success"===e.arg)t._vClipboard_success=e.value;else if("error"===e.arg)t._vClipboard_error=e.value;else{var o=new n(t,{text:function(){return e.value},action:function(){return"cut"===e.arg?"cut":"copy"},container:i.autoSetContainer?t:void 0});o.on("success",(function(e){var a=t._vClipboard_success;a&&a(e)})),o.on("error",(function(e){var a=t._vClipboard_error;a&&a(e)})),t._vClipboard=o}},update:function(t,e){"success"===e.arg?t._vClipboard_success=e.value:"error"===e.arg?t._vClipboard_error=e.value:(t._vClipboard.text=function(){return e.value},t._vClipboard.action=function(){return"cut"===e.arg?"cut":"copy"})},unbind:function(t,e){t._vClipboard&&("success"===e.arg?delete t._vClipboard_success:"error"===e.arg?delete t._vClipboard_error:(t._vClipboard.destroy(),delete t._vClipboard))}})},config:i};t.exports=o},ebc2:function(t,e,a){}}]);